<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Elastic Compute</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/landing-page.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet"
          type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top topnav" role="navigation">
    <div class="container topnav">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand topnav" href="#">Elastic Compute</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="./index.html#video">Video</a>
                </li>
                <li>
                    <a href="./index.html#presentation">Presentation</a>
                </li>
                <li>
                    <a href="./index.html#overview">Overview</a>
                </li>
                <li>
                    <a href="./index.html#analysis">Analysis</a>
                </li>
                <li>
                    <a href="./index.html#prediction">Prediction</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


<!-- Header -->
<a name="about"></a>

<div class="intro-header">

    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <div class="intro-message">
                    <h1>What would you do with a spare terawatt?</h1>
                    <hr class="intro-divider">
                    <h3>Elastic Compute - Harvard University, Data Science</h3>
                    <h5>Rick Farmer, Sean Keery, Robert Joseph Johnson</h5>
                    <hr class="intro-divider">
                    <ul class="list-inline intro-social-buttons">
                        <li>
                            <a href="https://github.com/harvard-team-pivot/elastic-compute"
                               class="btn btn-default btn-lg"><i class="fa fa-github fa-fw"></i> <span
                                    class="network-name">View on GitHub</span></a>
                        </li>
                        <li>
                            <a href="https://twitter.com/harvardpivots/" class="btn btn-default btn-lg"><i
                                    class="fa fa-twitter-square fa-fw"></i> <span class="network-name">Follow Us</span></a>
                        </li>
                    </ul>

                </div>
            </div>
        </div>

    </div>
    <!-- /.container -->

</div>
<!-- /.intro-header -->

<!-- Page Content -->

<a name="video"></a>

<div class="content-section-a">

    <div class="container">
        <div class="row">
            <div class="col-lg-5 col-sm-6">
                <hr class="section-heading-spacer">
                <div class="clearfix"></div>
                <h2 class="section-heading">Video<br>The 2-minute breakdown</h2>

                <p class="lead">We can do better with capacity planning and alerting for microservice-based,
                    container-managed clusters of compute resources.</p>
            </div>
            <div class="col-lg-5 col-lg-offset-2 col-sm-6">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/9Hat1SxM8jU" frameborder="0"
                        allowfullscreen></iframe>
                <!-- video class="img-responsive"  autoplay loop>
                    <source src="./video/Helix_0.mp4">
                </video -->
            </div>
        </div>

    </div>
    <!-- /.container -->

</div>
<!-- /.content-section-a -->

<a name="presentation"></a>

<div class="content-section-b">

    <div class="container">

        <div class="row">
            <div class="col-lg-5 col-lg-offset-1 col-sm-push-6  col-sm-6">
                <hr class="section-heading-spacer">
                <div class="clearfix"></div>
                <h2 class="section-heading">Presentation<br>The complete deck</h2>

                <p class="lead">Take your time and walk through the presentation deck for yourself.</p>
                <a href="presentation/index.html">Slideshow</a>
                </br>
                <a href="presentation/elastic-compute.pdf">PDF file with speaker notes</a>

            </div>
            <div class="col-lg-5 col-sm-pull-6  col-sm-6">
                <img class="img-responsive" src="img/presentation-skills.jpg" alt="Presentation">
            </div>
        </div>

    </div>
    <!-- /.container -->

</div>
<!-- /.content-section-b -->

<a name="overview"></a>

<div class="content-section-a">

    <div class="container">

        <div class="row">
            <div class="col-lg-5 col-sm-6">
                <hr class="section-heading-spacer">
                <div class="clearfix"></div>
                <h2 class="section-heading">Overview</h2>

                <p class="lead">We are entering the age of the third platform in IT. The way we run applications is
                    changing rapidly and significantly.</p>

                <ul>
                    <li>Platform Zero
                        <p class="caption">"Apps" were run on mainframes, but they were too big and too expensive.</p>
                    </li>
                    <li>Platform One
                        <p class="caption">Apps ran on commoditized computer hardware such as a PC, but this came with a
                            high degree of waste. CPUs, memory and disk remained underutilized as single apps sat
                            relatively idle to provide excess capacity for workloads that never came.</p></li>
                    <li>Platform Two
                        <p class="caption">Computers were virtualized so that several would be able to run at once on
                            one hardware computer. This better used the CPU, memory, and disk of the inter-connected
                            computers, thus creating a cloud of infrastructure resulting in much less waste.</p></li>
                </ul>

                <p class="copy">
                    <b>The third platform</b> moves the focus to driving business value and improving applications,
                    instead of the increasing cost and infrastructure. We now virtualize applications into slices of
                    CPU, memory, and disk of virtualized machines called containers. This process produces far less
                    waste because the application containers can be spun-up or down in reaction to demand nearly
                    instantly. We can scale applications to multiple nodes in places where capacity is available now,
                    whether in Boston or Hong Kong. To scale well, applications are being redesigned as microservices,
                    little units of work providing well-defined services to the whole of the modern distributed
                    application.
                </p>

                <p class="copy">
                    The key element enabling this is capacity planning and load alerting for the container managed
                    clusters. Do we need to scale now? If so, do we scale the app out because we need more resources to
                    serve an avalanche of demand? Or do we scale in, because Black Friday has passed and our retail app
                    no longer needs to use so many resources?
                </p>

            </div>
            <div class="col-lg-5 col-lg-offset-2 col-sm-6">
                <p class="copy">


                    <figure>
                        <img class="img-responsive" src="img/datacenter.jpg" alt="Datacenter">
                        <figcaption>
                            (source: <a href="http://topwalls.net/server-data-center-lights-neon-computer-server-blue/">topwalls.net</a>
                            )
                        </figcaption>
                    </figure>
                </p>

                <p class="copy">
                    Our project is motivated to reduce waste by "right-sizing" energy consumption by linking it more
                    directly to demand. Not many have seen the inside of a large Data Center, but these are colossal
                    energy-hungry ventures[<a href="references.html">1</a>] on a scale that is difficult to appreciate
                    without seeing one in person.

                    <br>
                    <br>

                    Everything in a data center is planned around watt usage. Over half of the wattage goes to server
                    load and most of the rest to cooling equipment. If we can better predict and scale compute resource
                    load more efficiently we have the opportunity to effect change in the United States alone at about
                    the 9.1 TWhr (Terawatts per hour) level and, perhaps, slow the projected rise in consumption by 2020
                    to 13.9 TWhr [<a href="references.html">2</a>].
                    <br>
                    <br>
                    <img class="img-responsive" src="img/stop-bg.jpg" alt="">
                </p>

            </div>

        </div>

    </div>
    <!-- /.container -->

</div>
<!-- /.content-section-a -->

<a name="analysis"></a>

<div class="content-section-b">

    <div class="container">

        <div class="row">

            <div class="col-lg-5 col-lg-offset-1 col-sm-push-6  col-sm-6">
                <hr class="section-heading-spacer">
                <div class="clearfix"></div>
                <h2 class="section-heading">Analysis</h2>

                <p class="lead">Looking for solutions</p>

                <p class="copy">
                    Our inferential goals are to understand how better to do capacity planning and alerting for
                    microservice-based, container-managed clusters of compute resources. We tried to learn what
                    makes a good alert threshold, such that we can predictably recommend actions that will keep an
                    application highly available under various demand scenarios ranging from low to high. Effectively,
                    we want to investigate the elasticity of supply and demand on compute resources so that we can make
                    ongoing dynamic recommendations about the proper scale for a given set of inputs.

                    Benefits include:
                    <ul>
                        <li>Learning
                <p class="caption">
                    Learning what a low usage state is for applications and provide information on the scale (how many
                    compute nodes) that should be set on a dynamic basis
                </p></li>
                <li>Energy
                    <p class="caption">
                        Reduction of energy usage by fitting the supply and demand more appropriately over time
                    </p>
                </li>
                <li>Elastic compute
                    <p class="caption">
                        The ability to prescriptively maintain application availability with the minimum amount of
                        compute resources
                    </p></li>
                </ul>

                </p>
            </div>
            <div class="col-lg-5 col-sm-pull-6  col-sm-6">

                <p class="copy">
                    Datacenters around the world

                    <figure>
                        <a href="https://public.tableau.com/views/Datacentersaroundtheworld/Datacentermap?:embed=y&:display_count=yes&:showTabs=y"><img
                                class="img-responsive" src="visualizations/datacenters-map.png" alt="Datacenters around the world"></a>

                        <figcaption>Fig 1. - Datacenters around the world.<br>
                            <a href="https://public.tableau.com/views/Datacentersaroundtheworld/Datacentermap?:embed=y&:display_count=yes&:showTabs=y">Click
                                the image above to view our interactive map</a>
                        </figcaption>
                    </figure>
                </p>
                <br><br>

                <p class="copy">
                    Datacenters by country
                    <figure>
                        <img class="img-responsive" src="visualizations/dc-records-by-country.png"
                             alt="Datacenter count per country">
                        <figcaption>
                            Fig 2. - Datacenter count per country (includes datacenters, co-location centers, shared and
                            virtual web-hosting providers)
                        </figcaption>
                        (data source: <a href="https://github.com/client9/ipcat">IP catalog project</a> )
                    </figure>
                </p>


            </div>

        </div>

        <div class="row">
            <!-- Please do not go above this line -->

            <div class="">
                <hr>
                <br>

                <p class="copy">
                    We started by analyzing a small subset of data provided to us by <a
                        href="http://pivotal.io">Pivotal</a> from
                    their <a href="http://run.pivotal.io/">Pivotal Web Services</a> platform.
                    This is largest public <a href="https://www.cloudfoundry.org/">Cloud Foundry</a> platform currently
                    in operation. Essentially, Cloud Foundry is and open-source well orchestrated container platform
                    that allows many
                    applications to scale easily in and out.
                    <br><br>
                    This data provided us insight into the nature of a completely container-based approach.

                    We started by analyzing a general container metric which gave around 3,000 instances (containers)
                    running on
                    this particular Cloud Foundry foundation. We found that the mean instance CPU utilization was very
                    low at around 2%.
                    Each instance consumed the about 500 Mb or memory.
                </p>
                <figure>
                    <img class="img-responsive" src="visualizations/cf-totals-avgs.png"
                         alt="">
                    <figcaption>
                    </figcaption>
                </figure>
            </div>


            <div class="">
                <br><br>

                <p class="copy">
                    The next level of consolidation in the third platform will occur through application virtualization.
                    Our goal was to identify how we could concentrate workloads to reduce energy consumption, so we
                    began looking for application data we could use to identify patterns.
                    <br>
                    We were able to get a number
                    of applications running on Pivotal Web Services. We added application performance monitoring by
                    binding all our microservices to a free trial of <a href="https://newrelic.com/">New Relic</a>. The
                    New Relic suite is superb at
                    tracking web and service transaction metrics such as response time and throughput. However, after
                    initial exploration, we found it very difficult to export the data in a way that we could identify
                    individual application utilization.
                </p>
                <figure>
                    <img class="img-responsive" src="visualizations/apm-app-new-relic-server-breakdown.png"
                         alt="New Relic">
                    <figcaption>
                        Fig 3. - New Relic
                    </figcaption>
                </figure>

            </div>


            <div class="">
                <br><br>

                <p class="copy">
                    Next we have a free subscription to <a href="https://app.datadoghq.com">DataDog</a>. We found the
                    metrics were too high level for what we
                    needed. They tended to be at the host/server level.
                </p>
                <figure>
                    <img class="img-responsive" src="visualizations/apm-firehose.png"
                         alt="">
                    <figcaption>
                        Fig 4. - DataDog
                    </figcaption>
                </figure>

            </div>


            <div class="">
                <br><br>

                <p class="copy">
                    Since each application runs in it’s own container, we thought we could get equivalent data from a
                    container solution. Coincidentally, we were given a demo of an internal Pivotal APM tool.
                </p>
                <figure>
                    <img class="img-responsive" src="visualizations/apm-container-metrics-utilization.png"
                         alt="">
                    <figcaption>
                        Fig 5. - Firehose nozzle container-level metrics
                    </figcaption>
                </figure>

            </div>


            <div class="">
                <br><br>

                <p class="copy">
                    Although the product was not available, we found we were able to obtain container level metrics
                    through a command line interface through the same application “nozzle” that this beautiful dashboard
                    was using.<br>
                    We installed a plugin that would export the metrics following the instructions at the <a
                        href="https://github.com/cloudfoundry/firehose-plugin">firehose-plugin site</a>. Then we
                    ran the following commands

                    <pre>
                    cf nozzle -f ContainerMetric > ContainerMetricPaaS4.txt
                    cf nozzle -f ValueMetric > valueMetricSaaS2.txt which piped the output to a file.
                    </pre>
                </p>

            </div>


            <!-- ### Start copy from here to add a new section of image followed by analysis ### -->
            <div class="">
                <br><br>

                <p class="copy">
                    <!--Robert/Sean: Copy me to add a new section of analysis with a viz. See the "### Start copy" and "###
                    End copy" comments in the code and just copy a new block for each. -->
                    Just to get a sense of general performance across the different services, we plotted the three different
                    readings: memory usage, disk usage, and CPU utilization. For easy readibility,
                    we have removed the exact timestamps from our x-axis. Below is an example lot of disk usage for PaaS:





                </p>
                <figure>
                    <img class="img-responsive" src="visualizations/diskPaaS.png"
                         alt="">
                    <figcaption>
                        Fig #6. - Disk Usage Over Time, PaaS
                    </figcaption>
                </figure>

            </div>
            <!-- ### End copy from here to add a new section of image followed by analysis ### -->
             <!-- ### Start copy from here to add a new section of image followed by analysis ### -->
            <div class="">
                <br><br>

                <p class="copy">
                    <!--Robert/Sean: Copy me to add a new section of analysis with a viz. See the "### Start copy" and "###
                    End copy" comments in the code and just copy a new block for each. -->
                    We took a look at our container data again, this time grouped by application, IP address, and Instance Index.
                    Cloud Foundry assigns each application a UUID (Universally Unique Identifier) that we can use to identify a single application.
                    Below is a sample plot of memory consumption, grouped by application.




                </p>
                <figure>
                    <img class="img-responsive" src="visualizations/memoryPerApp.png"
                         alt="">
                    <figcaption>
                        Fig #7. - Memory Usage per Application, PaaS
                    </figcaption>
                </figure>

            </div>
            <!-- ### End copy from here to add a new section of image followed by analysis ### -->


            <!-- ### Start copy from here to add a new section of image followed by analysis ### -->
            <div class="">
                <br><br>

                <p class="copy">
                    <!--Robert/Sean: Copy me to add a new section of analysis with a viz. See the "### Start copy" and "###
                    End copy" comments in the code and just copy a new block for each. -->
                    We then analyzed some of the relationships between memory/disk usage and CPU utilization in more detail on
                    an app by app basis. For further analysis, we should be concerned with instances and applications that appear in the top right or bottom left corners of these plots
                    - areas where both CPU Utilization and Memory/Disk Usage are considered to be high or low.
                    When a process is in this area, we can begin to consider scaling out compute resources. Likewise, if we are residing in an area
                    with low usage for both, we can start to ratchet down compute resources to scale them in.
                </p>
                <figure>
                    <img class="img-responsive" src="visualizations/cpuDiskPaaS.png"
                         alt="">
                    <figcaption>
                        Fig #8. - CPU Vs. Disk Usage per Application, PaaS
                    </figcaption>
                </figure>
                <figure>
                    <img class="img-responsive" src="visualizations/cpuDiskSaaS.png"
                         alt="">
                    <figcaption>
                        Fig #9. - CPU Vs. Disk Usage per Application, SaaS
                    </figcaption>
                </figure>

            </div>
            <!-- ### End copy from here to add a new section of image followed by analysis ### -->

            <!-- Please do not go below this line -->
        </div>

    </div>
    <!-- /.container -->

</div>
<!-- /.content-section-b -->

<a name="prediction"></a>

<div class="content-section-a">

    <div class="container">

        <div class="row">
            <div class="col-lg-5 col-sm-6">
                <hr class="section-heading-spacer">
                <div class="clearfix"></div>
                <h2 class="section-heading">Prediction</h2>

                <p class="lead">Our limited model illustrates the possibility of reducing energy usage by a terawatt in the near future.</p>
                Findings
                <p class="copy">
                Our data allowed us to group high and low utilization applications.
                We will be able to segregate the high usage services, with common patterns, through anti-affinity rules while letting the others fill in the gaps.
                Moreover, these pattern identification methods allow us to predict scaling needs before thresholds are met.
                This will allow us to scale out, along with scaling in as demand fades.
                The capability to reduce capacity will cut down on future electricity consumption.
                </p>
            </div>
            <div class="col-lg-5 col-lg-offset-2 col-sm-6">
                <img class="img-responsive" src="img/underwater-iceberg.jpg" alt="">
            </div>
        </div>

    </div>
    <!-- /.container -->

</div>
<!-- /.content-section-a -->

<a name="source"></a>

<div class="banner">

    <div class="container">

        <div class="row">
            <div class="col-lg-6">
                <h2>Project source code and data:</h2>
            </div>
            <div class="col-lg-6">
                <ul class="list-inline banner-social-buttons">
                    <li>
                        <a href="https://github.com/harvard-team-pivot/elastic-compute"
                           class="btn btn-default btn-lg"><i class="fa fa-github fa-fw"></i> <span class="network-name">View it on GitHub</span></a>
                    </li>
                    <li>
                        <a href="https://github.com/harvard-team-pivot/elastic-compute/blob/master/elasticCompute.ipynb"
                           class="btn btn-default btn-lg"><i class="fa fa-file-pdf-o fa-fw"></i> <span
                                class="network-name">Read the research</span></a>
                    </li>

                </ul>
            </div>
        </div>

    </div>
    <!-- /.container -->

</div>
<!-- /.banner -->

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <ul class="list-inline">
                    <li>
                        <a href="#">Home</a>
                    </li>
                    <li class="footer-menu-divider">&sdot;</li>
                    <li>
                        <a href="#video">Video</a>
                    </li>
                    <li>
                        <a href="#presentation">Presentation</a>
                    </li>
                    <li>
                        <a href="#overview">Overview</a>
                    </li>
                    <li>
                        <a href="#analysis">Analysis</a>
                    </li>
                    <li>
                        <a href="#prediction">Prediction</a>
                    </li>
                    <li class="footer-menu-divider">&sdot;</li>
                    <li>
                        <a href="./references.html">References and sources</a>
                    </li>
                </ul>
                <p class="copyright text-muted small"><a href="https://github.com/rickfarmer">Rick Farmer</a>, <a
                        href="https://github.com/skibum55">Sean Keery</a>, <a href="https://github.com/rjohnson42">Robert
                    Joseph Johnson</a></p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="js/bootstrap.min.js"></script>

</body>

</html>
